#include "stdafx.h"

Fvector du_volumetric_vertices[DU_VOLUMETRIC_NUMVERTEX]=
{
0	,	0	,	0			,	0	,	1	,	0			,	1	,	0	,	0			,	1	,	1	,	0	,
0	,	0	,	0.01010101	,	0	,	1	,	0.01010101	,	1	,	0	,	0.01010101	,	1	,	1	,	0.01010101	,
0	,	0	,	0.02020202	,	0	,	1	,	0.02020202	,	1	,	0	,	0.02020202	,	1	,	1	,	0.02020202	,
0	,	0	,	0.03030303	,	0	,	1	,	0.03030303	,	1	,	0	,	0.03030303	,	1	,	1	,	0.03030303	,
0	,	0	,	0.04040404	,	0	,	1	,	0.04040404	,	1	,	0	,	0.04040404	,	1	,	1	,	0.04040404	,
0	,	0	,	0.05050505	,	0	,	1	,	0.05050505	,	1	,	0	,	0.05050505	,	1	,	1	,	0.05050505	,
0	,	0	,	0.06060606	,	0	,	1	,	0.06060606	,	1	,	0	,	0.06060606	,	1	,	1	,	0.06060606	,
0	,	0	,	0.07070707	,	0	,	1	,	0.07070707	,	1	,	0	,	0.07070707	,	1	,	1	,	0.07070707	,
0	,	0	,	0.08080808	,	0	,	1	,	0.08080808	,	1	,	0	,	0.08080808	,	1	,	1	,	0.08080808	,
0	,	0	,	0.09090909	,	0	,	1	,	0.09090909	,	1	,	0	,	0.09090909	,	1	,	1	,	0.09090909	,
0	,	0	,	0.1010101	,	0	,	1	,	0.1010101	,	1	,	0	,	0.1010101	,	1	,	1	,	0.1010101	,
0	,	0	,	0.11111111	,	0	,	1	,	0.11111111	,	1	,	0	,	0.11111111	,	1	,	1	,	0.11111111	,
0	,	0	,	0.12121212	,	0	,	1	,	0.12121212	,	1	,	0	,	0.12121212	,	1	,	1	,	0.12121212	,
0	,	0	,	0.13131313	,	0	,	1	,	0.13131313	,	1	,	0	,	0.13131313	,	1	,	1	,	0.13131313	,
0	,	0	,	0.14141414	,	0	,	1	,	0.14141414	,	1	,	0	,	0.14141414	,	1	,	1	,	0.14141414	,
0	,	0	,	0.15151515	,	0	,	1	,	0.15151515	,	1	,	0	,	0.15151515	,	1	,	1	,	0.15151515	,
0	,	0	,	0.16161616	,	0	,	1	,	0.16161616	,	1	,	0	,	0.16161616	,	1	,	1	,	0.16161616	,
0	,	0	,	0.17171717	,	0	,	1	,	0.17171717	,	1	,	0	,	0.17171717	,	1	,	1	,	0.17171717	,
0	,	0	,	0.18181818	,	0	,	1	,	0.18181818	,	1	,	0	,	0.18181818	,	1	,	1	,	0.18181818	,
0	,	0	,	0.19191919	,	0	,	1	,	0.19191919	,	1	,	0	,	0.19191919	,	1	,	1	,	0.19191919	,
0	,	0	,	0.2020202	,	0	,	1	,	0.2020202	,	1	,	0	,	0.2020202	,	1	,	1	,	0.2020202	,
0	,	0	,	0.21212121	,	0	,	1	,	0.21212121	,	1	,	0	,	0.21212121	,	1	,	1	,	0.21212121	,
0	,	0	,	0.22222222	,	0	,	1	,	0.22222222	,	1	,	0	,	0.22222222	,	1	,	1	,	0.22222222	,
0	,	0	,	0.23232323	,	0	,	1	,	0.23232323	,	1	,	0	,	0.23232323	,	1	,	1	,	0.23232323	,
0	,	0	,	0.24242424	,	0	,	1	,	0.24242424	,	1	,	0	,	0.24242424	,	1	,	1	,	0.24242424	,
0	,	0	,	0.25252525	,	0	,	1	,	0.25252525	,	1	,	0	,	0.25252525	,	1	,	1	,	0.25252525	,
0	,	0	,	0.26262626	,	0	,	1	,	0.26262626	,	1	,	0	,	0.26262626	,	1	,	1	,	0.26262626	,
0	,	0	,	0.27272727	,	0	,	1	,	0.27272727	,	1	,	0	,	0.27272727	,	1	,	1	,	0.27272727	,
0	,	0	,	0.28282828	,	0	,	1	,	0.28282828	,	1	,	0	,	0.28282828	,	1	,	1	,	0.28282828	,
0	,	0	,	0.29292929	,	0	,	1	,	0.29292929	,	1	,	0	,	0.29292929	,	1	,	1	,	0.29292929	,
0	,	0	,	0.3030303	,	0	,	1	,	0.3030303	,	1	,	0	,	0.3030303	,	1	,	1	,	0.3030303	,
0	,	0	,	0.31313131	,	0	,	1	,	0.31313131	,	1	,	0	,	0.31313131	,	1	,	1	,	0.31313131	,
0	,	0	,	0.32323232	,	0	,	1	,	0.32323232	,	1	,	0	,	0.32323232	,	1	,	1	,	0.32323232	,
0	,	0	,	0.33333333	,	0	,	1	,	0.33333333	,	1	,	0	,	0.33333333	,	1	,	1	,	0.33333333	,
0	,	0	,	0.34343434	,	0	,	1	,	0.34343434	,	1	,	0	,	0.34343434	,	1	,	1	,	0.34343434	,
0	,	0	,	0.35353535	,	0	,	1	,	0.35353535	,	1	,	0	,	0.35353535	,	1	,	1	,	0.35353535	,
0	,	0	,	0.36363636	,	0	,	1	,	0.36363636	,	1	,	0	,	0.36363636	,	1	,	1	,	0.36363636	,
0	,	0	,	0.37373737	,	0	,	1	,	0.37373737	,	1	,	0	,	0.37373737	,	1	,	1	,	0.37373737	,
0	,	0	,	0.38383838	,	0	,	1	,	0.38383838	,	1	,	0	,	0.38383838	,	1	,	1	,	0.38383838	,
0	,	0	,	0.39393939	,	0	,	1	,	0.39393939	,	1	,	0	,	0.39393939	,	1	,	1	,	0.39393939	,
0	,	0	,	0.4040404	,	0	,	1	,	0.4040404	,	1	,	0	,	0.4040404	,	1	,	1	,	0.4040404	,
0	,	0	,	0.41414141	,	0	,	1	,	0.41414141	,	1	,	0	,	0.41414141	,	1	,	1	,	0.41414141	,
0	,	0	,	0.42424242	,	0	,	1	,	0.42424242	,	1	,	0	,	0.42424242	,	1	,	1	,	0.42424242	,
0	,	0	,	0.43434343	,	0	,	1	,	0.43434343	,	1	,	0	,	0.43434343	,	1	,	1	,	0.43434343	,
0	,	0	,	0.44444444	,	0	,	1	,	0.44444444	,	1	,	0	,	0.44444444	,	1	,	1	,	0.44444444	,
0	,	0	,	0.45454545	,	0	,	1	,	0.45454545	,	1	,	0	,	0.45454545	,	1	,	1	,	0.45454545	,
0	,	0	,	0.46464646	,	0	,	1	,	0.46464646	,	1	,	0	,	0.46464646	,	1	,	1	,	0.46464646	,
0	,	0	,	0.47474747	,	0	,	1	,	0.47474747	,	1	,	0	,	0.47474747	,	1	,	1	,	0.47474747	,
0	,	0	,	0.48484848	,	0	,	1	,	0.48484848	,	1	,	0	,	0.48484848	,	1	,	1	,	0.48484848	,
0	,	0	,	0.49494949	,	0	,	1	,	0.49494949	,	1	,	0	,	0.49494949	,	1	,	1	,	0.49494949	,
0	,	0	,	0.5050505	,	0	,	1	,	0.5050505	,	1	,	0	,	0.5050505	,	1	,	1	,	0.5050505	,
0	,	0	,	0.51515151	,	0	,	1	,	0.51515151	,	1	,	0	,	0.51515151	,	1	,	1	,	0.51515151	,
0	,	0	,	0.52525252	,	0	,	1	,	0.52525252	,	1	,	0	,	0.52525252	,	1	,	1	,	0.52525252	,
0	,	0	,	0.53535353	,	0	,	1	,	0.53535353	,	1	,	0	,	0.53535353	,	1	,	1	,	0.53535353	,
0	,	0	,	0.54545454	,	0	,	1	,	0.54545454	,	1	,	0	,	0.54545454	,	1	,	1	,	0.54545454	,
0	,	0	,	0.55555555	,	0	,	1	,	0.55555555	,	1	,	0	,	0.55555555	,	1	,	1	,	0.55555555	,
0	,	0	,	0.56565656	,	0	,	1	,	0.56565656	,	1	,	0	,	0.56565656	,	1	,	1	,	0.56565656	,
0	,	0	,	0.57575757	,	0	,	1	,	0.57575757	,	1	,	0	,	0.57575757	,	1	,	1	,	0.57575757	,
0	,	0	,	0.58585858	,	0	,	1	,	0.58585858	,	1	,	0	,	0.58585858	,	1	,	1	,	0.58585858	,
0	,	0	,	0.59595959	,	0	,	1	,	0.59595959	,	1	,	0	,	0.59595959	,	1	,	1	,	0.59595959	,
0	,	0	,	0.6060606	,	0	,	1	,	0.6060606	,	1	,	0	,	0.6060606	,	1	,	1	,	0.6060606	,
0	,	0	,	0.61616161	,	0	,	1	,	0.61616161	,	1	,	0	,	0.61616161	,	1	,	1	,	0.61616161	,
0	,	0	,	0.62626262	,	0	,	1	,	0.62626262	,	1	,	0	,	0.62626262	,	1	,	1	,	0.62626262	,
0	,	0	,	0.63636363	,	0	,	1	,	0.63636363	,	1	,	0	,	0.63636363	,	1	,	1	,	0.63636363	,
0	,	0	,	0.64646464	,	0	,	1	,	0.64646464	,	1	,	0	,	0.64646464	,	1	,	1	,	0.64646464	,
0	,	0	,	0.65656565	,	0	,	1	,	0.65656565	,	1	,	0	,	0.65656565	,	1	,	1	,	0.65656565	,
0	,	0	,	0.66666666	,	0	,	1	,	0.66666666	,	1	,	0	,	0.66666666	,	1	,	1	,	0.66666666	,
0	,	0	,	0.67676767	,	0	,	1	,	0.67676767	,	1	,	0	,	0.67676767	,	1	,	1	,	0.67676767	,
0	,	0	,	0.68686868	,	0	,	1	,	0.68686868	,	1	,	0	,	0.68686868	,	1	,	1	,	0.68686868	,
0	,	0	,	0.69696969	,	0	,	1	,	0.69696969	,	1	,	0	,	0.69696969	,	1	,	1	,	0.69696969	,
0	,	0	,	0.7070707	,	0	,	1	,	0.7070707	,	1	,	0	,	0.7070707	,	1	,	1	,	0.7070707	,
0	,	0	,	0.71717171	,	0	,	1	,	0.71717171	,	1	,	0	,	0.71717171	,	1	,	1	,	0.71717171	,
0	,	0	,	0.72727272	,	0	,	1	,	0.72727272	,	1	,	0	,	0.72727272	,	1	,	1	,	0.72727272	,
0	,	0	,	0.73737373	,	0	,	1	,	0.73737373	,	1	,	0	,	0.73737373	,	1	,	1	,	0.73737373	,
0	,	0	,	0.74747474	,	0	,	1	,	0.74747474	,	1	,	0	,	0.74747474	,	1	,	1	,	0.74747474	,
0	,	0	,	0.75757575	,	0	,	1	,	0.75757575	,	1	,	0	,	0.75757575	,	1	,	1	,	0.75757575	,
0	,	0	,	0.76767676	,	0	,	1	,	0.76767676	,	1	,	0	,	0.76767676	,	1	,	1	,	0.76767676	,
0	,	0	,	0.777777769999999	,	0	,	1	,	0.777777769999999	,	1	,	0	,	0.777777769999999	,	1	,	1	,	0.777777769999999	,
0	,	0	,	0.787878779999999	,	0	,	1	,	0.787878779999999	,	1	,	0	,	0.787878779999999	,	1	,	1	,	0.787878779999999	,
0	,	0	,	0.797979789999999	,	0	,	1	,	0.797979789999999	,	1	,	0	,	0.797979789999999	,	1	,	1	,	0.797979789999999	,
0	,	0	,	0.808080799999999	,	0	,	1	,	0.808080799999999	,	1	,	0	,	0.808080799999999	,	1	,	1	,	0.808080799999999	,
0	,	0	,	0.818181809999999	,	0	,	1	,	0.818181809999999	,	1	,	0	,	0.818181809999999	,	1	,	1	,	0.818181809999999	,
0	,	0	,	0.828282819999999	,	0	,	1	,	0.828282819999999	,	1	,	0	,	0.828282819999999	,	1	,	1	,	0.828282819999999	,
0	,	0	,	0.838383829999999	,	0	,	1	,	0.838383829999999	,	1	,	0	,	0.838383829999999	,	1	,	1	,	0.838383829999999	,
0	,	0	,	0.848484839999999	,	0	,	1	,	0.848484839999999	,	1	,	0	,	0.848484839999999	,	1	,	1	,	0.848484839999999	,
0	,	0	,	0.858585849999999	,	0	,	1	,	0.858585849999999	,	1	,	0	,	0.858585849999999	,	1	,	1	,	0.858585849999999	,
0	,	0	,	0.868686859999999	,	0	,	1	,	0.868686859999999	,	1	,	0	,	0.868686859999999	,	1	,	1	,	0.868686859999999	,
0	,	0	,	0.878787869999999	,	0	,	1	,	0.878787869999999	,	1	,	0	,	0.878787869999999	,	1	,	1	,	0.878787869999999	,
0	,	0	,	0.888888879999999	,	0	,	1	,	0.888888879999999	,	1	,	0	,	0.888888879999999	,	1	,	1	,	0.888888879999999	,
0	,	0	,	0.898989889999999	,	0	,	1	,	0.898989889999999	,	1	,	0	,	0.898989889999999	,	1	,	1	,	0.898989889999999	,
0	,	0	,	0.909090899999999	,	0	,	1	,	0.909090899999999	,	1	,	0	,	0.909090899999999	,	1	,	1	,	0.909090899999999	,
0	,	0	,	0.919191909999999	,	0	,	1	,	0.919191909999999	,	1	,	0	,	0.919191909999999	,	1	,	1	,	0.919191909999999	,
0	,	0	,	0.929292919999999	,	0	,	1	,	0.929292919999999	,	1	,	0	,	0.929292919999999	,	1	,	1	,	0.929292919999999	,
0	,	0	,	0.939393929999999	,	0	,	1	,	0.939393929999999	,	1	,	0	,	0.939393929999999	,	1	,	1	,	0.939393929999999	,
0	,	0	,	0.949494939999999	,	0	,	1	,	0.949494939999999	,	1	,	0	,	0.949494939999999	,	1	,	1	,	0.949494939999999	,
0	,	0	,	0.959595949999999	,	0	,	1	,	0.959595949999999	,	1	,	0	,	0.959595949999999	,	1	,	1	,	0.959595949999999	,
0	,	0	,	0.969696959999999	,	0	,	1	,	0.969696959999999	,	1	,	0	,	0.969696959999999	,	1	,	1	,	0.969696959999999	,
0	,	0	,	0.979797969999999	,	0	,	1	,	0.979797969999999	,	1	,	0	,	0.979797969999999	,	1	,	1	,	0.979797969999999	,
0	,	0	,	0.989898979999999	,	0	,	1	,	0.989898979999999	,	1	,	0	,	0.989898979999999	,	1	,	1	,	0.989898979999999	,
0	,	0	,	0.999999989999999	,	0	,	1	,	0.999999989999999	,	1	,	0	,	0.999999989999999	,	1	,	1	,	0.999999989999999	,
};

u16 du_volumetric_faces[DU_VOLUMETRIC_NUMFACES*3]={
	0	,	1	,	2	,	2	,	1	,	3	,
	4	,	5	,	6	,	6	,	5	,	7	,
	8	,	9	,	10	,	10	,	9	,	11	,
	12	,	13	,	14	,	14	,	13	,	15	,
	16	,	17	,	18	,	18	,	17	,	19	,
	20	,	21	,	22	,	22	,	21	,	23	,
	24	,	25	,	26	,	26	,	25	,	27	,
	28	,	29	,	30	,	30	,	29	,	31	,
	32	,	33	,	34	,	34	,	33	,	35	,
	36	,	37	,	38	,	38	,	37	,	39	,
	40	,	41	,	42	,	42	,	41	,	43	,
	44	,	45	,	46	,	46	,	45	,	47	,
	48	,	49	,	50	,	50	,	49	,	51	,
	52	,	53	,	54	,	54	,	53	,	55	,
	56	,	57	,	58	,	58	,	57	,	59	,
	60	,	61	,	62	,	62	,	61	,	63	,
	64	,	65	,	66	,	66	,	65	,	67	,
	68	,	69	,	70	,	70	,	69	,	71	,
	72	,	73	,	74	,	74	,	73	,	75	,
	76	,	77	,	78	,	78	,	77	,	79	,
	80	,	81	,	82	,	82	,	81	,	83	,
	84	,	85	,	86	,	86	,	85	,	87	,
	88	,	89	,	90	,	90	,	89	,	91	,
	92	,	93	,	94	,	94	,	93	,	95	,
	96	,	97	,	98	,	98	,	97	,	99	,
	100	,	101	,	102	,	102	,	101	,	103	,
	104	,	105	,	106	,	106	,	105	,	107	,
	108	,	109	,	110	,	110	,	109	,	111	,
	112	,	113	,	114	,	114	,	113	,	115	,
	116	,	117	,	118	,	118	,	117	,	119	,
	120	,	121	,	122	,	122	,	121	,	123	,
	124	,	125	,	126	,	126	,	125	,	127	,
	128	,	129	,	130	,	130	,	129	,	131	,
	132	,	133	,	134	,	134	,	133	,	135	,
	136	,	137	,	138	,	138	,	137	,	139	,
	140	,	141	,	142	,	142	,	141	,	143	,
	144	,	145	,	146	,	146	,	145	,	147	,
	148	,	149	,	150	,	150	,	149	,	151	,
	152	,	153	,	154	,	154	,	153	,	155	,
	156	,	157	,	158	,	158	,	157	,	159	,
	160	,	161	,	162	,	162	,	161	,	163	,
	164	,	165	,	166	,	166	,	165	,	167	,
	168	,	169	,	170	,	170	,	169	,	171	,
	172	,	173	,	174	,	174	,	173	,	175	,
	176	,	177	,	178	,	178	,	177	,	179	,
	180	,	181	,	182	,	182	,	181	,	183	,
	184	,	185	,	186	,	186	,	185	,	187	,
	188	,	189	,	190	,	190	,	189	,	191	,
	192	,	193	,	194	,	194	,	193	,	195	,
	196	,	197	,	198	,	198	,	197	,	199	,
	200	,	201	,	202	,	202	,	201	,	203	,
	204	,	205	,	206	,	206	,	205	,	207	,
	208	,	209	,	210	,	210	,	209	,	211	,
	212	,	213	,	214	,	214	,	213	,	215	,
	216	,	217	,	218	,	218	,	217	,	219	,
	220	,	221	,	222	,	222	,	221	,	223	,
	224	,	225	,	226	,	226	,	225	,	227	,
	228	,	229	,	230	,	230	,	229	,	231	,
	232	,	233	,	234	,	234	,	233	,	235	,
	236	,	237	,	238	,	238	,	237	,	239	,
	240	,	241	,	242	,	242	,	241	,	243	,
	244	,	245	,	246	,	246	,	245	,	247	,
	248	,	249	,	250	,	250	,	249	,	251	,
	252	,	253	,	254	,	254	,	253	,	255	,
	256	,	257	,	258	,	258	,	257	,	259	,
	260	,	261	,	262	,	262	,	261	,	263	,
	264	,	265	,	266	,	266	,	265	,	267	,
	268	,	269	,	270	,	270	,	269	,	271	,
	272	,	273	,	274	,	274	,	273	,	275	,
	276	,	277	,	278	,	278	,	277	,	279	,
	280	,	281	,	282	,	282	,	281	,	283	,
	284	,	285	,	286	,	286	,	285	,	287	,
	288	,	289	,	290	,	290	,	289	,	291	,
	292	,	293	,	294	,	294	,	293	,	295	,
	296	,	297	,	298	,	298	,	297	,	299	,
	300	,	301	,	302	,	302	,	301	,	303	,
	304	,	305	,	306	,	306	,	305	,	307	,
	308	,	309	,	310	,	310	,	309	,	311	,
	312	,	313	,	314	,	314	,	313	,	315	,
	316	,	317	,	318	,	318	,	317	,	319	,
	320	,	321	,	322	,	322	,	321	,	323	,
	324	,	325	,	326	,	326	,	325	,	327	,
	328	,	329	,	330	,	330	,	329	,	331	,
	332	,	333	,	334	,	334	,	333	,	335	,
	336	,	337	,	338	,	338	,	337	,	339	,
	340	,	341	,	342	,	342	,	341	,	343	,
	344	,	345	,	346	,	346	,	345	,	347	,
	348	,	349	,	350	,	350	,	349	,	351	,
	352	,	353	,	354	,	354	,	353	,	355	,
	356	,	357	,	358	,	358	,	357	,	359	,
	360	,	361	,	362	,	362	,	361	,	363	,
	364	,	365	,	366	,	366	,	365	,	367	,
	368	,	369	,	370	,	370	,	369	,	371	,
	372	,	373	,	374	,	374	,	373	,	375	,
	376	,	377	,	378	,	378	,	377	,	379	,
	380	,	381	,	382	,	382	,	381	,	383	,
	384	,	385	,	386	,	386	,	385	,	387	,
	388	,	389	,	390	,	390	,	389	,	391	,
	392	,	393	,	394	,	394	,	393	,	395	,
	396	,	397	,	398	,	398	,	397	,	399	,
};

void CRenderTarget::accum_volumetric_geom_create()
{
	u32	dwUsage				= D3DUSAGE_WRITEONLY;

	// vertices
	{
		u32		vCount		= DU_VOLUMETRIC_NUMVERTEX;
		u32		vSize		= 3*4;
		R_CHK	(HW.pDevice->CreateVertexBuffer(
			vCount*vSize,
			dwUsage,
			0,
			D3DPOOL_MANAGED,
			&g_accum_volumetric_vb,
			0));
		BYTE*	pData				= 0;
		R_CHK						(g_accum_volumetric_vb->Lock(0,0,(void**)&pData,0));
		CopyMemory				(pData,du_volumetric_vertices,vCount*vSize);
		g_accum_volumetric_vb->Unlock	();
	}

	// Indices
	{
		u32		iCount		= DU_VOLUMETRIC_NUMFACES*3;

		BYTE*	pData		= 0;
		R_CHK				(HW.pDevice->CreateIndexBuffer(iCount*2,dwUsage,D3DFMT_INDEX16,D3DPOOL_MANAGED,&g_accum_volumetric_ib,0));
		R_CHK				(g_accum_volumetric_ib->Lock(0,0,(void**)&pData,0));
		CopyMemory		(pData,du_volumetric_faces,iCount*2);
		g_accum_volumetric_ib->Unlock	();
	}
}

void CRenderTarget::accum_volumetric_geom_destroy()
{
	_RELEASE(g_accum_volumetric_ib);
	_RELEASE(g_accum_volumetric_vb);
}
